<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>邀请码</title>
    <style>
        .phone,.code{
            margin-top: 10px;
            display: -webkit-box;
            display: -moz-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-flex: 1;
            box-flex: 1;
            -webkit-flex-grow: 1;
            flex-grow: 1;
            -webkit-flex-shrink: 1;
            flex-shrink: 1;
            max-width: 65%;
            position: relative;
            border-bottom: 1px solid rgba(0,0,0,0.2);
            padding: 5px;
        }
        .addFocus {
            border-bottom-color: rgb(48, 70, 213)
        }
        .addSFouce{
            border:1px solid rgb(48, 70, 213)
        }
        .code{
            width: 65%;
        }
        .submit{
            display: block;
            margin-top:10px;

        }
        .submit button{
            margin:0 auto;
        }
        .inputStyle{
            -webkit-box-flex: 1;
            box-flex: 1;
            -webkit-flex-grow: 1;
            flex-grow: 1;
            -webkit-flex-shrink: 1;
            flex-shrink: 1;
            background-color: transparent;
            border: none;
            display: block;
            font: 300 12px Roboto,RobotoDraft,Helvetica,Arial,sans-serif;
            height: 24px;
            line-height: 24px;
            margin: 0;
            min-width: 0%;
            outline: none;
            padding: 0;
            z-index: 0;
        }
        .buttonStyle{
            width:65%;
            cursor: pointer;
            display: block;
            min-height: 1em;
            outline: 0;
            border: none;
            vertical-align: baseline;
            background: #E0E1E2;
            background-color:  rgb(48, 70, 213);
            background-image: none;
            color:#fff;
            font-family: Lato, 'Helvetica Neue', Arial, Helvetica, sans-serif;
            margin: 0 .25em 0 0;
            padding: .78571429em 1.5em;
            text-transform: none;
            text-shadow: none;
            font-weight: 700;
            line-height: 1em;
            font-style: normal;
            text-align: center;
            text-decoration: none;
            border-radius: .28571429rem;
            box-shadow: 0 0 0 1px transparent inset, 0 0 0 0 rgba(34, 36, 38, .15) inset;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-transition: opacity .1s ease, background-color .1s ease, color .1s ease, box-shadow .1s ease, background .1s ease;
            transition: opacity .1s ease, background-color .1s ease, color .1s ease, box-shadow .1s ease, background .1s ease;
            will-change: '';
            -webkit-tap-highlight-color: transparent;
        }
        ::-webkit-input-placeholder {
            font-size: 16px;
        }
        .AxOyFc {
            -webkit-transform-origin: bottom left;
            transform-origin: bottom left;
            -webkit-transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
            transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
            -webkit-transition-property: color, bottom, transform;
            transition-property: color, bottom, transform;
            color: rgba(0, 0, 0, 0.38);
            font: 400 17px Roboto, RobotoDraft, Helvetica, Arial, sans-serif;
            font-size: 17px;
            pointer-events: none;
            position: absolute;
            bottom: 3px;
            left: 0;
            width: 100%;

        }
        .logo{
            width:45px;
            height:45px;
            transform: rotate(180deg);
            -ms-transform: rotate(180deg);
            -moz-transform: rotate(180deg);
            -webkit-transform: rotate(180deg);
            -o-transform: rotate(180deg);
        }
        .formData select{
            display: block;
            background-color: #fff;
            border: 1px solid #ccc;
            height: 30px;
            width:65%;
            *margin-top: 4px;
            line-height: 30px
            appearance:none;
            -moz-appearance:none;
            -webkit-appearance:none;
            background: url("../image/arrow.png") no-repeat scroll right center transparent !important;
            padding-right: 14px;

        }
        .header h2,.header p,.header img{
            text-align: center;
            display: block;
            margin:10px auto;
        }
        .header h2{
            margin:20px auto;
        }
        .phone,.code,.formData select{
            margin:20px  auto;
        }


        @media (min-width:320px) and (max-width:768px){
            .content{
                width:100%;
                margin:0 auto;
            }
            .formData select,.formData input{
                width: 65%;

            }

        }
        @media screen and (min-width: 769px){
            .content{
                -webkit-flex-shrink: 0;
                flex-shrink: 0;
                background: #fff;
                -webkit-border-radius: 8px;
                border-radius: 8px;
                -webkit-box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
                box-shadow: 0 2px 2px 0 rgba(0,0,0,0.14), 0 3px 1px -2px rgba(0,0,0,0.12), 0 1px 5px 0 rgba(0,0,0,0.2);
                display: block;
                margin: 0 auto;
                min-height: 0;
                width: 450px;
                padding: 24px;
            }
        }
    </style>
    <script type="text/javascript" src="../js/jquery-1.11.0.js"></script>
</head>
<body>
<div class="content">
    <div class="header">
        <img src="../img/logo.png" class="logo" />
        <h2>创建您的 Bitpie 账号</h2>
        <p>您的邀请码为：<span id="invitedCode"></span></p>
    </div>
    <div class="formData">
        <select id="selAreaCode">
            <option value="355">阿尔巴尼亚(355)</option><option value="213">阿尔及利亚(213)</option><option value="93">阿富汗(93)</option><option value="54">阿根廷(54)</option><option value="353">爱尔兰(353)</option><option value="20">埃及(20)</option><option value="251">埃塞俄比亚(251)</option><option value="372">爱沙尼亚(372)</option><option value="1907">阿拉斯加(1907)</option><option value="971">阿联酋(971)</option><option value="297">阿鲁巴岛(297)</option><option value="968">阿曼(968)</option><option value="376">安道尔(376)</option><option value="244">安哥拉(244)</option><option value="1264">安圭拉岛(1264)</option><option value="1268">安提瓜和巴布达(1268)</option><option value="61">澳大利亚(61)</option><option value="43">奥地利(43)</option><option value="853">澳门(853)</option><option value="994">阿塞拜疆(994)</option><option value="247">阿森松(247)</option><option value="1246">巴巴多斯(1246)</option><option value="675">巴布亚新几内亚(675)</option><option value="1242">巴哈马(1242)</option><option value="375">白俄罗斯共和国(375)</option><option value="1441">百慕大群岛(1441)</option><option value="92">巴基斯坦(92)</option><option value="595">巴拉圭(595)</option><option value="970">巴勒斯坦(970)</option><option value="973">巴林(973)</option><option value="507">巴拿马(507)</option><option value="359">保加利亚(359)</option><option value="55">巴西(55)</option><option value="229">贝宁(229)</option><option value="32">比利时(32)</option><option value="354">冰岛(354)</option><option value="267">博茨瓦纳(267)</option><option value="1787">波多黎哥(1787)</option><option value="1787">波多黎哥(1787)</option><option value="48">波兰(48)</option><option value="591">玻利维亚(591)</option><option value="501">伯利兹(501)</option><option value="387">波斯尼亚和塞哥维那(387)</option><option value="975">不丹(975)</option><option value="226">布基拉法索(226)</option><option value="257">布隆迪(257)</option><option value="850">朝鲜(850)</option><option value="240">赤道几内亚(240)</option><option value="45">丹麦(45)</option><option value="49">德国(49)</option><option value="246">迪戈加西亚(246)</option><option value="684">东萨摩亚(684)</option><option value="228">多哥(228)</option><option value="1809">多米尼加共和国(1809)</option><option value="1767">多米尼加联邦(1767)</option><option value="593">厄瓜多尔(593)</option><option value="291">厄里特里亚(291)</option><option value="7">俄罗斯联邦(7)</option><option value="33">法国(33)</option><option value="298">法罗群岛(298)</option><option value="3906698">梵蒂冈(3906698)</option><option value="689">法属波里尼西亚、塔希提(689)</option><option value="594">法属圭亚那(594)</option><option value="679">斐济(679)</option><option value="63">菲律宾(63)</option><option value="358">芬兰(358)</option><option value="238">佛得角(238)</option><option value="500">福克兰群岛(500)</option><option value="220">冈比亚(220)</option><option value="242">刚果(242)</option><option value="299">格陵兰岛(299)</option><option value="1473">格林纳达(1473)</option><option value="995">格鲁吉亚共和国(995)</option><option value="57">哥伦比亚(57)</option><option value="506">哥斯达黎加(506)</option><option value="590">瓜多罗普(590)</option><option value="1671">关岛(1671)</option><option value="53">古巴(53)</option><option value="592">圭亚那(592)</option><option value="509">海地(509)</option><option value="82">韩国(82)</option><option value="7">哈萨克斯坦共和国(7)</option><option value="31">荷兰(31)</option><option value="599">荷属安的列斯群岛(599)</option><option value="504">洪都拉斯(504)</option><option value="233">加纳(233)</option><option value="1">加拿大(1)</option><option value="855">柬埔寨(855)</option><option value="241">加蓬(241)</option><option value="253">吉布提(253)</option><option value="420">捷克(420)</option><option value="996">吉尔吉斯坦共和国(996)</option><option value="686">基里巴斯(686)</option><option value="224">几内亚(224)</option><option value="245">几内亚比绍(245)</option><option value="263">津巴布韦(263)</option><option value="1345">开曼群岛(1345)</option><option value="237">喀麦隆(237)</option><option value="974">卡塔尔(974)</option><option value="682">科克群岛(682)</option><option value="619162">科科斯岛(619162)</option><option value="385">科罗地亚(385)</option><option value="269">科摩罗(269)</option><option value="254">肯尼亚(254)</option><option value="225">科特迪瓦(225)</option><option value="965">科威特(965)</option><option value="266">莱索托(266)</option><option value="856">老挝(856)</option><option value="371">拉脱维亚(371)</option><option value="961">黎巴嫩(961)</option><option value="231">利比里亚(231)</option><option value="218">利比亚(218)</option><option value="423">列支敦士登(423)</option><option value="370">立陶宛(370)</option><option value="262">留尼旺岛(262)</option><option value="40">罗马尼亚(40)</option><option value="352">卢森堡(352)</option><option value="250">卢旺达(250)</option><option value="261">马达加斯加(261)</option><option value="960">马尔代夫(960)</option><option value="356">马耳他(356)</option><option value="60">马来西亚(60)</option><option value="265">马拉维(265)</option><option value="223">马里(223)</option><option value="1670">马里亚纳群岛(1670)</option><option value="230">毛里求斯(230)</option><option value="222">毛里塔尼亚(222)</option><option value="389">马其顿(389)</option><option value="692">马绍尔群岛(692)</option><option value="596">马提尼克(596)</option><option value="269">马约特岛(269)</option><option value="1">美国(1)</option><option value="976">蒙古(976)</option><option value="880">孟加拉国(880)</option><option value="1664">蒙特塞拉特岛(1664)</option><option value="95">缅甸(95)</option><option value="691">密克罗尼西亚(691)</option><option value="51">秘鲁(51)</option><option value="373">摩尔多瓦(373)</option><option value="212">摩洛哥(212)</option><option value="377">摩纳哥(377)</option><option value="258">莫桑比克(258)</option><option value="52">墨西哥(52)</option><option value="264">纳米比亚(264)</option><option value="27">南非(27)</option><option value="381">南斯拉夫(381)</option><option value="674">瑙鲁(674)</option><option value="977">尼泊尔(977)</option><option value="505">尼加拉瓜(505)</option><option value="227">尼日尔(227)</option><option value="234">尼日利亚(234)</option><option value="683">纽埃岛(683)</option><option value="672">诺福克岛(672)</option><option value="47">挪威(47)</option><option value="680">帕劳(680)</option><option value="239">普林西比(239)</option><option value="351">葡萄牙(351)</option><option value="81">日本(81)</option><option value="46">瑞典(46)</option><option value="41">瑞士(41)</option><option value="503">萨尔瓦多(503)</option><option value="232">塞拉利昂(232)</option><option value="221">塞内加尔(221)</option><option value="357">塞浦路斯(357)</option><option value="248">塞舌尔(248)</option><option value="259">桑给巴尔(259)</option><option value="966">沙特阿拉伯(966)</option><option value="619164">圣诞岛(619164)</option><option value="239">圣多美(239)</option><option value="290">圣赫勒拿(290)</option><option value="1869">圣克里斯托弗和尼维斯(1869)</option><option value="1758">圣卢西亚(1758)</option><option value="378">圣马力诺(378)</option><option value="508">圣皮埃尔岛密克隆岛（法）(508)</option><option value="1784">圣文森特岛（英）(1784)</option><option value="94">斯里兰卡(94)</option><option value="421">斯洛伐克(421)</option><option value="386">斯洛文尼亚(386)</option><option value="268">斯威士兰(268)</option><option value="249">苏丹(249)</option><option value="597">苏里南(597)</option><option value="677">所罗门群岛(677)</option><option value="252">索马里(252)</option><option value="66">泰国(66)</option><option value="886">台湾(886)</option><option value="992">塔吉克斯坦共和国(992)</option><option value="676">汤加(676)</option><option value="255">坦桑尼亚(255)</option><option value="1649">特克斯和凯科斯群岛(1649)</option><option value="1868">特立尼达和多巴哥(1868)</option><option value="90">土耳其(90)</option><option value="993">土库曼斯坦共和国(993)</option><option value="216">突尼斯(216)</option><option value="690">托克鲁(690)</option><option value="688">图瓦卢(688)</option><option value="1681">瓦里斯和富士那群岛(1681)</option><option value="678">瓦努阿图(678)</option><option value="502">危地马拉(502)</option><option value="1340">维尔京群岛(1340)</option><option value="1808">威克岛(1808)</option><option value="58">委内瑞拉(58)</option><option value="673">文莱(673)</option><option value="256">乌干达(256)</option><option value="380">乌克兰(380)</option><option value="598">乌拉圭(598)</option><option value="998">乌兹别克斯坦共和国(998)</option><option value="852">香港(852)</option><option value="1808">夏威夷(1808)</option><option value="34">西班牙(34)</option><option value="30">希腊(30)</option><option value="65">新加坡(65)</option><option value="687">新咯里多尼亚群岛(687)</option><option value="64">新西兰(64)</option><option value="36">匈牙利(36)</option><option value="685">西萨摩亚(685)</option><option value="963">叙利亚(963)</option><option value="1876">牙买加(1876)</option><option value="374">亚美尼亚共和国(374)</option><option value="967">也门(967)</option><option value="39">意大利(39)</option><option value="964">伊拉克(964)</option><option value="98">伊朗(98)</option><option value="91">印度(91)</option><option value="62">印度尼西亚(62)</option><option value="44">英国(44)</option><option value="972">以色列(972)</option><option value="962">约旦(962)</option><option value="84">越南(84)</option><option value="260">赞比亚(260)</option><option value="235">乍得(235)</option><option value="243">扎伊尔(243)</option><option value="350">直布罗陀(350)</option><option value="56">智利(56)</option><option value="236">中非(236)</option><option value="86" selected="true">中国(86)</option><option value="1808">中途岛(1808)</option>
        </select>
        <div class="phone">
           <input id="phone" class="inputStyle" type="text" placeholder="请输入手机号">
        </div>
        <div class="code">
            <input id="smsCode" class="inputStyle" type="text" placeholder="请输入验证码">
            <button id="getCode" class="buttonStyle">获取短信验证码</button>
        </div>
        <div class="submit">
        <button id="getVaile" class="buttonStyle">提交</button>
        </div>

    </div>
</div>
<script>
    $(function(){
        var url = location.href.split("?");
        var strTostring = url[1].split("&");
        var invite_code = strTostring[0].split("=")[1];
        var account_name = strTostring[1].split("=")[1];
        function checkPhone(code,str){
            var result = false;
            if(code == "86"){
                if(/^1[0|3|4|5|7|8|9][0-9]\d{8}$/.test(str)){
                    result = true;
                }
            }else{
                if(/\d{5,13}/.test(str)){
                    result = true;
                }
            }
            return result
        }
        $("#invitedCode").html(invite_code);
        $("#getCode").on("click",function(){
            if(!checkPhone($("#selAreaCode").val(),$("#phone").val())){
                return alert("请输入正确的手机号");
            }
            var self = $(this);
            self.attr('disabled',true);
            $.ajax({
                type:'GET',
                url:'http://192.168.1.153:8000/api/v1/invite/getCode?phone='+$("#phone").val()+'&area='+$("#selAreaCode").val(),
                dataType:'json',
                success:function(data){
                    if(data.code != 200) {
                        window.location.reload();
                        $('#getCode').attr('disabled',false);
                        return alert(data.rm);
                    }

                    var index = 60;
                    var interval = setInterval(function(){

                        if(index<=1) {
                            clearInterval(interval);
                            $('#getCode').attr('disabled',false);
                            self.text('重新获取');
                            return;
                        }

                        self.html('<span lang="en">重新获取，</span>'+index);
                        index--;
                    },1000);

                    self.text('已发送');
                },
                error:function(e){
                    return alert("失败");
                }
            })
        })

        $("#getVaile").on("click",function(){
            var selAreaCode = $("#selAreaCode").val();
            if(!invite_code){
                return alert("请传参数邀请码");
            }
            if(!account_name){
                return alert("请传参数账户名");
            }
            var phone = $("#phone").val();
            var vaildCode = $("#smsCode").val();
            if(!vaildCode){
                return alert("请输入验证码");
            }
            if(!phone){
                return alert("请输入手机号");
            }
            if(!checkPhone($("#selAreaCode").val(),$("#phone").val())){
                return alert("请输入正确的手机号");
            }
            $.ajax({
                type:'POST',
                url:'http://192.168.1.153:8000/api/v1/invite/user/recode',
                dataType:'json',
                data:{
                    "area":selAreaCode,
                    "phone":phone,
                    "inviteCode":invite_code,
                    "vaildCode":vaildCode,
                    "accountName":account_name

                },
                success:function(data){
                    if(data.result){
                        return alert("您已提交，请下载比特派进行使用");
                    }else{
                        return alert(data.rm);
                    }
                },
                error:function(e){
                    return alert("失败");
                }
            })





        })

        $("input").focus(function(){
            $(this).parent().siblings().removeClass("addFocus");
            $(this).parent().addClass("addFocus");
        })
    })
</script>
</body>
</html>